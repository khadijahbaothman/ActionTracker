:root{
    --green-light:#456E3A;
    --green-mid:#507A49;
    --green-dark:#366030;
    --green-deep:#204A18;
    --bg:#EEEEEE;
    --grey:#6B7280;
    --border:#E5E7EB;
  }
  
  *{ box-sizing:border-box; }
  
  html { scroll-behavior:smooth; }
  
  body{
    margin:0;
    font-family:"Segoe UI", sans-serif;
    background:#EEEEEE;
    background-image: url(../static/images/bg5.png);
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    overflow-y:auto;
  }
  
  .page{
    min-height:auto;
    padding:28px 32px 220px;
    display:flex;
    justify-content:center;
  }
  
  .container{
    width:100%;
    max-width:1200px;
    padding-bottom:150px;
  }
  
  /* HEADER */
  .header-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  
  .page-title{
    font-size:26px;
    font-weight:800;
    color:var(--green-deep);
  }
  
  .page-subtitle{
    font-size:13px;
    color:var(--grey);
  }
  
  .header-actions{
    display:flex;
    gap:10px;
  }
  
  /* BUTTONS */
  .add-btn{
    width:52px;
    height:52px;
    border-radius:14px;
    background:var(--green-mid);
    border:none;
    color:#fff;
    font-size:28px;
    cursor:pointer;
    box-shadow:0 6px 16px rgba(80,122,73,0.28);
    transition: all 0.3s ease;
  }
  
  .add-btn:hover {
    background:var(--green-dark);
    transform: scale(1.05);
  }
  
  .my-btn{
    padding:12px 16px;
    border-radius:12px;
    border:1px solid var(--green-mid);
    background:#fff;
    color:var(--green-deep);
    font-weight:700;
    cursor:pointer;
    transition: all 0.3s ease;
  }
  
  .my-btn:hover{
    background:var(--green-mid);
    color:#fff;
  }
  
  .back-btn{
    margin-top:14px;
    background:none;
    border:none;
    color:var(--green-mid);
    font-size:14px;
    cursor:pointer;
    font-weight:700;
    transition: all 0.3s ease;
  }
  
  .back-btn:hover {
    color:var(--green-dark);
    transform: translateX(-3px);
  }
  
  /* KPI */
  .kpi-container{
    display:flex;
    justify-content: center;
    gap:16px;
    margin:22px 0 26px;
    flex-wrap:wrap;
  }
  
  .kpi-card{
    position:relative;
    overflow:hidden;
    flex: 1 1 180px;
    min-width: 180px;
    max-width: 220px;
    height: 100px;
    padding:14px 16px;
    border-radius:16px;
    color:#fff;
    box-shadow:0 10px 24px rgba(0,0,0,0.16);
    display:flex;
    align-items:center;
    justify-content:space-between;
    transition: all 0.3s ease;
  }
  
  .kpi-card:hover {
    transform: translateY(-5px);
    box-shadow:0 15px 30px rgba(0,0,0,0.2);
  }
  
  .kpi-left{
    display:flex;
    flex-direction:column;
    gap:6px;
    z-index:2;
    flex: 1;
  }
  
  .card-value{
    font-size:34px;
    font-weight:900;
    line-height:1;
  }
  
  .card-text{
    font-size:14px;
    font-weight:600;
    opacity:.95;
  }
  
  .kpi-card .icon{
    position:absolute;
    right:12px;
    top:50%;
    transform:translateY(-50%);
    font-size:66px;
    opacity:.14;
    z-index: 1;
  }
  
  .kpi-card.green{ background:linear-gradient(135deg,#4f7d45,#204A18); }
  .kpi-card.green-dark{ background:linear-gradient(135deg,#1f7a4f,#065f46); }
  .kpi-card.orange{ background:linear-gradient(135deg,#f59e0b,#92400e); }
  .kpi-card.blue{ background:linear-gradient(135deg,#2563eb,#1e3a8a); }
  .kpi-card.red{ background:linear-gradient(135deg,#b91c1c,#7f1d1d); }
  
  /* TASKS */
  .task-wrapper{
    background:#fff;
    padding:22px;
    border-radius:18px;
    box-shadow:0 10px 22px rgba(0,0,0,0.10);
    border:1px solid var(--border);
    transition: all 0.3s ease;
  }
  
  .tasks-grid{
    margin-top:16px;
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
    gap:16px;
  }
  
  .task-card{
    background:#fff;
    border:1px solid #D7DCCF;
    padding:16px;
    border-radius:14px;
    cursor:pointer;
    transition: all 0.3s ease;
  }
  
  .task-card:hover{
    border-color:var(--green-mid);
    box-shadow:0 10px 22px rgba(0,0,0,0.14);
    transform: translateY(-2px);
  }
  
  .task-card.overdue{
    border-color:#b91c1c;
  }
  
  .status-badge{
    background:var(--green-light);
    color:#fff;
    font-size:11px;
    padding:4px 10px;
    border-radius:999px;
    margin-bottom:8px;
    display:inline-block;
  }
  
  .task-title{
    font-size:15px;
    font-weight:800;
    color:var(--green-deep);
    margin-bottom:6px;
  }
  
  .task-meta{
    font-size:13px;
    color:var(--grey);
  }
  
  .completed-header{
    margin-top:28px;
    font-size:20px;
    font-weight:900;
    color:var(--green-deep);
  }
  
  #completedGrid .task-card{
    opacity:.65;
  }
  
  /* FOOTER */
  .managers-footer{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    padding:8px 0;
    background:#F7F7F7;
    border-top:1px solid #DADADA;
    z-index:999;
  }
  
  .managers-row{
    display:flex;
    gap:12px;
    padding:0 16px;
    overflow-x:auto;
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: var(--green-mid) #f1f1f1;
  }
  
  .managers-row::-webkit-scrollbar { height: 6px; }
  .managers-row::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
  .managers-row::-webkit-scrollbar-thumb { background: var(--green-mid); border-radius: 3px; }
  .managers-row::-webkit-scrollbar-thumb:hover { background: var(--green-dark); }
  
  .manager-card{
    width:200px;
    min-width:200px;
    height:230px;
    padding:16px 12px;
    background:#fff;
    border:1px solid #E2E8D9;
    border-radius:18px;
    display:flex;
    flex-direction:column;
    align-items:center;
    text-align:center;
    overflow:hidden;
    transition: all 0.3s ease;
  }
  
  .manager-card:hover{
    transform:translateY(-4px);
    box-shadow:0 12px 26px rgba(0,0,0,.12);
  }
  
  .manager-card.active{
    background:var(--green-mid);
    border-color:var(--green-dark);
  }
  
  .manager-avatar{
    width:92px;
    height:92px;
    border-radius:50%;
    object-fit:cover;
    border:4px solid #E5E7EB;
    object-position: top;   
  }
  
  .manager-card.active .manager-avatar{
    border-color:rgba(255,255,255,.6);
  }
  
  .manager-name{
    font-size:15px;
    font-weight:900;
    color:var(--green-deep);
    margin-top:8px;
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
  
  .manager-title{
    font-size:12px;
    color:#6B7280;
    line-height:1.3;
  }
  
  .manager-card.active .manager-name,
  .manager-card.active .manager-title{
    color:#fff;
  }
  
  /* MANAGER STATS */
  .manager-stats-grid{
    width:100%;
    margin-top:auto;
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:8px;
  }
  
  .stat-box{
    height:52px;
    background:#F1F5F0;
    border-radius:12px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }
  
  .stat-num{
    font-size:17px;
    font-weight:900;
    padding:2px;
    line-height:1;
  }
  
  .stat-label{
    font-size:8px;
    font-weight:500;
  }
  
  .stat-box.all{ color:#204A18; }
  .stat-box.progress{ color:#E2852E; }
  .stat-box.review{ color:#1E3A8A; }
  .stat-box.overdue{ color:#7F1D1D; }
  
  .manager-card.active .stat-box{
    background:rgba(255,255,255,.18);
  }
  .manager-card.active .stat-box,
  .manager-card.active .stat-box *{
    color:#fff;
  }
  
  /* MODALS */
  .modal-backdrop{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.45);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:2000;
  }
  
  /* ✅ أهم تعديل: بدون transform */
  .modal{
    background:#fff;
    width:420px;
    padding:20px;
    border-radius:14px;
    box-shadow:0 18px 48px rgba(0,0,0,.28);
  }
  
  /* inputs */
  .input{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #CCC;
    transition: all 0.3s ease;
  }
  
  .input:focus{
    outline:none;
    border-color: var(--green-mid);
    box-shadow: 0 0 0 2px rgba(80, 122, 73, 0.2);
  }
  
  /* ✅ ضمان إضافي للكندر */
  input[type="date"]{
    position: relative;
    z-index: 9999;
  }
  
  .modal-close{
    float:right;
    font-size:22px;
    cursor:pointer;
    background:none;
    border:none;
  }
  
  .modal-title{
    font-size:18px;
    font-weight:900;
    color:var(--green-deep);
  }
  
  .modal-item{
    margin:8px 0;
    font-size:14px;
    color:var(--grey);
  }
  
  .btn{
    padding:10px 16px;
    border:none;
    border-radius:12px;
    cursor:pointer;
  }
  
  .btn.full{
    width:100%;
    padding:12px;
    margin-top:10px;
    border:none;
    border-radius:10px;
    color:white;
    font-weight:bold;
    cursor:pointer;
    transition: all 0.3s ease;
  }
  
  .btn.full:hover{
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  
  /* MODAL ACTIONS */
  .modal-actions{
    margin-top:20px;
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  
  .primary-action{
    width:100%;
    padding:12px;
    border-radius:12px;
    border:none;
    background:#366030;
    color:#fff;
    font-weight:800;
    font-size:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    cursor:pointer;
    transition:all .25s ease;
  }
  
  .primary-action:hover{
    background:#204A18;
    transform:translateY(-1px);
  }
  
  .secondary-actions{
    display:flex;
    justify-content:center;
    gap:18px;
  }
  
  .icon-btn{
    width:44px;
    height:44px;
    border-radius:50%;
    border:none;
    background:#F3F4F6;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    transition:all .25s ease;
    font-size:16px;
  }
  
  .icon-btn.edit{ color:#204A18; }
  .icon-btn.edit:hover{ background:#E6F0E8; }
  .icon-btn.delete{ color:#b91c1c; }
  .icon-btn.delete:hover{ background:#FEE2E2; }
  
  /* ANALYTICS */
  .analytics-box{
    background:#fff;
    border-radius:18px;
    padding:20px;
    margin-bottom:24px;
    box-shadow:0 10px 22px rgba(0,0,0,0.1);
  }
  
  .analytics-box h3{
    margin-bottom:12px;
    color:#204A18;
  }
  
  .top-owner{
    display:flex;
    justify-content:space-between;
    padding:8px 12px;
    background:#F3F6F2;
    border-radius:10px;
    margin-bottom:6px;
    font-weight:600;
  }
  
  /* ✅ Charts side-by-side + small */
  .charts-row{
    display:flex;
    gap:14px;
    margin-top:12px;
    align-items:stretch;
  }
  
  .chart-box{
    flex:1;
    background:#fff;
    border:1px solid #EDF2EA;
    border-radius:14px;
    padding:10px 10px 6px;
    height:220px; /* تحكم بالحجم */
    overflow:hidden;
  }
  
  .chart-box canvas{
    width:100% !important;
    height:100% !important;
  }
  
  /* Timeline */
  .timeline-box{
    margin-top:18px;
  }
  
  .timeline-title{
    color:#204A18;
    margin:0 0 8px;
  }
  
  .timeline-canvas{
    height:240px;
    background:#fff;
    border:1px solid #EDF2EA;
    border-radius:14px;
    padding:10px;
  }
  
  .timeline-canvas canvas{
    width:100% !important;
    height:100% !important;
  }
  
  /* Owner checklist */
  .owner-checklist{
    display:grid;
    grid-template-columns: repeat(2,1fr);
    gap:8px;
    margin-top:6px;
  }
  
  .owner-checklist label{
    display:flex;
    align-items:center;
    gap:8px;
    background:#F3F6F2;
    padding:8px 10px;
    border-radius:8px;
    font-size:13px;
    cursor:pointer;
  }
  
  .owner-checklist input{
    accent-color:#507A49;
  }

  .icon-btn.csv {
    width: 56px;        /* نفس زر + */
    height: 56px;       /* نفس زر + */
    border-radius: 16px;
    border: 2px solid #507A49;
    background: transparent;
    color: #507A49;
    cursor: pointer;
  
    display: flex;
    align-items: center;
    justify-content: center;
  
    font-size: 22px;    /* حجم أيقونة CSV */
  }
  
  .icon-btn.csv:hover {
    background: rgba(80,122,73,0.1);
  }

  .kpi-card.active-filter {
    outline: 3px solid rgba(9, 88, 16, 0.6);
    transform: translateY(-2px);
  }
  .status-badge {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 600;
    width: fit-content;
  }
  
  /* Planned */
  .status-planned {
    background: #065f46;
    color: #fff;
  }
  
  /* In Progress */
  .status-in-progress {
    background: rgba(249,115,22,0.15);
    color: #F97316;
  }
  
  /* Under Review */
  .status-under-review {
    background: rgba(139,92,246,0.15);
    color: #3B82F6;
  }
  
  /* Completed */
  .status-completed {
    background: rgba(34,197,94,0.15);
    color: #22C55E;
  }
  
  /* Overdue */
  .status-overdue {
    background: rgba(239,68,68,0.15);
    color: #EF4444;
  }